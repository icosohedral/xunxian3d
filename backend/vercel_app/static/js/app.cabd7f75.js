(function(){"use strict";var e={4899:function(e,t,o){var n=o(5130),r=o(6768);const l={id:"app",class:"text-center bg-background bg-stone-100"};function s(e,t,o,n,s,a){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.bF)(i)])}var a={name:"App",data(){return{colorTheme:"stone",darkmod:!1}}},i=o(1241);const c=(0,i.A)(a,[["render",s]]);var u=c,d=o(1387),f=o(4232);const b={class:"canvas-container"},p={class:"canvas-wrapper"},v={class:"sidebar text-left"},m={class:"preset-area"},g=["value"],h={class:"upload-area mt-4"};function y(e,t,o,n,l,s){const a=(0,r.g2)("TresPerspectiveCamera"),i=(0,r.g2)("OrbitControls"),c=(0,r.g2)("TresAmbientLight"),u=(0,r.g2)("TresDirectionalLight"),d=(0,r.g2)("primitive"),y=(0,r.g2)("TresCanvas");return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[6]||(t[6]=(0,r.Lk)("div",{class:"flex px-6 py-4 bg-stone-200"},[(0,r.Lk)("h1",{class:"text-2xl font-bold text-amber-700 flex items-center"},[(0,r.Lk)("img",{src:"/static/slogo.ico",alt:"Logo",class:"w-20 h-10 mr-2"}),(0,r.eW)(" 寻仙模型查看器 ")])],-1)),(0,r.Lk)("div",b,[(0,r.Lk)("div",p,[(0,r.bF)(y,{class:"fixed-canvas","clear-color":"#FFFFFF"},{default:(0,r.k6)((()=>[(0,r.bF)(a,{position:[0,2,5]}),(0,r.bF)(i),(0,r.bF)(c,{intensity:1}),(0,r.bF)(u,{position:[5,5,5],intensity:.8}),l.objModel?((0,r.uX)(),(0,r.Wv)(d,{key:0,object:l.objModel},null,8,["object"])):(0,r.Q3)("",!0)])),_:1})]),(0,r.Lk)("div",v,[(0,r.Lk)("div",m,[t[3]||(t[3]=(0,r.Lk)("label",{for:"preset-models",class:"block mb-2 font-semibold text-gray-700"},"选择模型",-1)),(0,r.Lk)("select",{id:"preset-models",class:"w-full p-2 border rounded-lg",onChange:t[0]||(t[0]=(...e)=>s.handlePresetSelect&&s.handlePresetSelect(...e))},[t[2]||(t[2]=(0,r.Lk)("option",{value:""},"-- 选择模型 --",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.presetModels,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.url,value:e.url},(0,f.v_)(e.name),9,g)))),128))],32)]),(0,r.Lk)("div",h,[t[4]||(t[4]=(0,r.Lk)("label",{class:"block mb-2 font-semibold text-gray-700"},"上传模型",-1)),(0,r.Lk)("input",{class:"w-full p-2 border rounded-lg",type:"file",accept:".obj",onChange:t[1]||(t[1]=(...e)=>s.handleUpload&&s.handleUpload(...e))},null,32)]),t[5]||(t[5]=(0,r.Fv)('<div class="instructions mt-6"><h2 class="block font-semibold text-base text-gray-700 mb-4">操作说明</h2><ul class="text-gray-600"><li class="mb-2">🔄 <strong>按住左键</strong> 旋转模型</li><li class="mb-2">🤏 <strong>按住右键</strong> 拖动模型</li><li class="mb-2">🔍 <strong>使用滚轮</strong> 缩放模型</li></ul></div>',1))])])],64)}o(4603),o(7566),o(8721);var k=o(144),L=o(6013),w=o(6702),x=o(427),j=o(8371),F=o(4373);const O=F.A.create({baseURL:"/",timeout:1e4});var C={get_model_list(){return O.get("/api/get_model_list")}},M={name:"ThreeDViewer",components:{TresCanvas:L.rs,OrbitControls:w.NU},data(){return{presetModels:[],modelUrl:"",objModel:null}},mounted(){this.fetchModels()},watch:{modelUrl(e){if(!e)return;const t=new x.L;t.load(e,(e=>{const t=new j._4j({color:8421504});e.traverse((e=>{e.isMesh&&(e.material=t)})),this.objModel=(0,k.IG)(e)}))}},methods:{async fetchModels(){try{const e=await C.get_model_list();e.data.result?this.presetModels=e.data.data.map((e=>({name:e,url:`/static/models/${e}`}))):console.error("获取模型列表失败:",e.data.message)}catch(e){console.error("API 请求失败:",e)}},handleUpload(e){const t=e.target.files[0];t&&(this.modelUrl=URL.createObjectURL(t))},handlePresetSelect(e){this.modelUrl=e.target.value}}};const _=(0,i.A)(M,[["render",y]]);var T=_;const U=[{path:"/",name:"threeDViewer",component:T}],P=(0,d.aE)({history:(0,d.LA)(),routes:U});P.beforeEach(((e,t,o)=>{document.title="寻仙模型查看器",o()}));var E=P;const S=(0,n.Ef)(u);S.use(E),S.mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,l){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],l=e[u][2];for(var a=!0,i=0;i<n.length;i++)(!1&l||s>=l)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(a=!1,l<s&&(s=l));if(a){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[n,r,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,l,s=n[0],a=n[1],i=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(i)var u=i(o)}for(t&&t(n);c<s.length;c++)l=s[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(u)},n=self["webpackChunkfeuilles"]=self["webpackChunkfeuilles"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(4899)}));n=o.O(n)})();
//# sourceMappingURL=app.cabd7f75.js.map