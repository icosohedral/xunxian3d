(function(){"use strict";var e={9759:function(e,t,n){var r=n(5130),o=n(6768);const l={id:"app",class:"text-center bg-background bg-stone-100"};function s(e,t,n,r,s,a){const i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.bF)(i)])}var a={name:"App",data(){return{colorTheme:"stone",darkmod:!1}}},i=n(1241);const c=(0,i.A)(a,[["render",s]]);var u=c,d=n(1387),f=n(4232);const b={class:"canvas-container"},p={class:"canvas-wrapper"},v={class:"sidebar text-left"},m={class:"preset-area"},g=["value"],h={class:"upload-area mt-4"};function y(e,t,n,r,l,s){const a=(0,o.g2)("TresPerspectiveCamera"),i=(0,o.g2)("OrbitControls"),c=(0,o.g2)("TresAmbientLight"),u=(0,o.g2)("TresDirectionalLight"),d=(0,o.g2)("primitive"),y=(0,o.g2)("TresCanvas");return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[6]||(t[6]=(0,o.Lk)("div",{class:"flex px-6 py-4 bg-stone-200"},[(0,o.Lk)("h1",{class:"text-2xl font-bold text-gray-700"},"3D Viewer")],-1)),(0,o.Lk)("div",b,[(0,o.Lk)("div",p,[(0,o.bF)(y,{class:"fixed-canvas","clear-color":"#FFFFFF"},{default:(0,o.k6)((()=>[(0,o.bF)(a,{position:[0,2,5]}),(0,o.bF)(i),(0,o.bF)(c,{intensity:1}),(0,o.bF)(u,{position:[5,5,5],intensity:.8}),l.objModel?((0,o.uX)(),(0,o.Wv)(d,{key:0,object:l.objModel},null,8,["object"])):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("div",v,[(0,o.Lk)("div",m,[t[3]||(t[3]=(0,o.Lk)("label",{for:"preset-models",class:"block mb-2 font-semibold text-gray-700"},"选择模型",-1)),(0,o.Lk)("select",{id:"preset-models",class:"w-full p-2 border rounded-lg",onChange:t[0]||(t[0]=(...e)=>s.handlePresetSelect&&s.handlePresetSelect(...e))},[t[2]||(t[2]=(0,o.Lk)("option",{value:""},"-- 选择模型 --",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.presetModels,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.url,value:e.url},(0,f.v_)(e.name),9,g)))),128))],32)]),(0,o.Lk)("div",h,[t[4]||(t[4]=(0,o.Lk)("label",{class:"block mb-2 font-semibold text-gray-700"},"上传模型",-1)),(0,o.Lk)("input",{class:"w-full p-2 border rounded-lg",type:"file",accept:".obj",onChange:t[1]||(t[1]=(...e)=>s.handleUpload&&s.handleUpload(...e))},null,32)]),t[5]||(t[5]=(0,o.Fv)('<div class="instructions mt-6"><h2 class="block font-semibold text-base text-gray-700 mb-4">操作说明</h2><ul class="text-gray-600"><li class="mb-2">🔄 <strong>按住左键</strong> 旋转模型</li><li class="mb-2">🤏 <strong>按住右键</strong> 拖动模型</li><li class="mb-2">🔍 <strong>使用滚轮</strong> 缩放模型</li></ul></div>',1))])])],64)}n(4603),n(7566),n(8721);var k=n(144),w=n(6013),L=n(6702),x=n(427),j=n(8371),F=n(4373);const O=F.A.create({baseURL:"/",timeout:1e4});var C={get_model_list(){return O.get("/api/get_model_list")}},M={name:"ThreeDViewer",components:{TresCanvas:w.rs,OrbitControls:L.NU},data(){return{presetModels:[],modelUrl:"",objModel:null}},mounted(){this.fetchModels()},watch:{modelUrl(e){if(!e)return;const t=new x.L;t.load(e,(e=>{const t=new j._4j({color:8421504});e.traverse((e=>{e.isMesh&&(e.material=t)})),this.objModel=(0,k.IG)(e)}))}},methods:{async fetchModels(){try{const e=await C.get_model_list();e.data.result?this.presetModels=e.data.data.map((e=>({name:e,url:`/static/models/${e}`}))):console.error("获取模型列表失败:",e.data.message)}catch(e){console.error("API 请求失败:",e)}},handleUpload(e){const t=e.target.files[0];t&&(this.modelUrl=URL.createObjectURL(t))},handlePresetSelect(e){this.modelUrl=e.target.value}}};const _=(0,i.A)(M,[["render",y]]);var T=_;const U=[{path:"/",name:"threeDViewer",component:T}],P=(0,d.aE)({history:(0,d.LA)(),routes:U});P.beforeEach(((e,t,n)=>{document.title="寻仙模型查看器",n()}));var E=P;const S=(0,r.Ef)(u);S.use(E),S.mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,l){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],l=e[u][2];for(var a=!0,i=0;i<r.length;i++)(!1&l||s>=l)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(a=!1,l<s&&(s=l));if(a){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,o,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,l,s=r[0],a=r[1],i=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(i)var u=i(n)}for(t&&t(r);c<s.length;c++)l=s[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},r=self["webpackChunkfeuilles"]=self["webpackChunkfeuilles"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(9759)}));r=n.O(r)})();
//# sourceMappingURL=app.f49477ec.js.map