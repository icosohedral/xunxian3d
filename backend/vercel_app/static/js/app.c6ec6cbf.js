(function(){"use strict";var e={5565:function(e,t,o){var n=o(5130),r=o(6768);const s={id:"app",class:"text-center bg-background bg-stone-100"};function l(e,t,o,n,l,a){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.bF)(i)])}var a={name:"App",data(){return{colorTheme:"stone",darkmod:!1}}},i=o(1241);const c=(0,i.A)(a,[["render",l]]);var d=c,u=o(1387),f=o(4232);const b={class:"canvas-container"},p={class:"canvas-wrapper relative border-4 border-stone-200"},m={class:"sidebar text-left"},v={class:"preset-area flex items-center space-x-2 align-middle"},g=["value"];function h(e,t,o,n,s,l){const a=(0,r.g2)("TresPerspectiveCamera"),i=(0,r.g2)("OrbitControls"),c=(0,r.g2)("TresAmbientLight"),d=(0,r.g2)("TresDirectionalLight"),u=(0,r.g2)("primitive"),h=(0,r.g2)("TresCanvas");return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[5]||(t[5]=(0,r.Lk)("div",{class:"flex px-6 py-4 bg-stone-200"},[(0,r.Lk)("h1",{class:"text-2xl font-bold text-amber-700 flex items-center"},[(0,r.Lk)("img",{src:"/static/slogo.ico",alt:"Logo",class:"w-20 h-10 mr-2"}),(0,r.eW)(" å¯»ä»™æ¨¡å‹æŸ¥çœ‹å™¨ ")])],-1)),(0,r.Lk)("div",b,[(0,r.Lk)("div",p,[(0,r.bF)(h,{class:"fixed-canvas","clear-color":"#FFFFFF"},{default:(0,r.k6)((()=>[(0,r.bF)(a,{position:[0,2,5]}),(0,r.bF)(i),(0,r.bF)(c,{intensity:1}),(0,r.bF)(d,{position:[5,5,5],intensity:.8}),s.objModel?((0,r.uX)(),(0,r.Wv)(u,{key:0,object:s.objModel},null,8,["object"])):(0,r.Q3)("",!0)])),_:1})]),(0,r.Lk)("div",m,[(0,r.Lk)("div",v,[t[3]||(t[3]=(0,r.Lk)("label",{for:"preset-models",class:"font-semibold text-gray-700"},"é€‰æ‹©æ¨¡å‹",-1)),(0,r.Lk)("select",{id:"preset-models",class:"p-2 border rounded-lg flex-grow text-sm",onChange:t[0]||(t[0]=(...e)=>l.handlePresetSelect&&l.handlePresetSelect(...e))},[t[2]||(t[2]=(0,r.Lk)("option",{value:""},"-- é€‰æ‹©æ¨¡å‹ --",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.presetModels,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.url,value:e.url},(0,f.v_)(e.name),9,g)))),128))],32),s.modelUrl?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>l.downloadModel&&l.downloadModel(...e)),title:"ä¸‹è½½æ¨¡å‹",class:"tabler--download px-4 py-2 hover:text-blue-700"})):(0,r.Q3)("",!0)]),t[4]||(t[4]=(0,r.Fv)('<div class="instructions mt-6"><h2 class="block font-semibold text-base text-gray-700 mb-4">æ“ä½œè¯´æ˜</h2><ul class="text-gray-600"><li class="mb-2">ğŸ”„ <strong>æŒ‰ä½å·¦é”®</strong> æ—‹è½¬æ¨¡å‹</li><li class="mb-2">ğŸ¤ <strong>æŒ‰ä½å³é”®</strong> æ‹–åŠ¨æ¨¡å‹</li><li class="mb-2">ğŸ” <strong>ä½¿ç”¨æ»šè½®</strong> ç¼©æ”¾æ¨¡å‹</li></ul></div>',1))])])],64)}var y=o(144),w=o(6013),k=o(6702),x=o(427),M=o(8371),j=o(1353),C=o(4373);const L=C.A.create({baseURL:"/",timeout:1e4});var F={get_model_list(){return L.get("/api/get_model_list")}},O={name:"ThreeDViewer",components:{TresCanvas:w.rs,OrbitControls:k.NU},data(){return{presetModels:[],modelUrl:"",objModel:null}},mounted(){this.fetchModels()},watch:{modelUrl(e){if(!e)return;const t=e.split(".").pop().toLowerCase();if("obj"===t){const t=new x.L;t.load(e,(e=>{const t=new M._4j({color:8421504});e.traverse((e=>{e.isMesh&&(e.material=t)})),e.rotation.y=240*Math.PI/180,e.scale.set(2,2,2),e.position.y=-1.2,this.objModel=(0,y.IG)(e)}))}else if("glb"===t||"gltf"===t){const t=new j.B;t.load(e,(e=>{e.scene.rotation.y=240*Math.PI/180,e.scene.scale.set(2,2,2),e.scene.position.y=-1.2,this.objModel=(0,y.IG)(e.scene)}))}}},methods:{async fetchModels(){try{const e=await F.get_model_list();e.data.result?this.presetModels=e.data.data.map((e=>({name:e.replace(/\.(glb|gltf|obj)$/i,""),url:`/static/models/${e}`}))):console.error("è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥:",e.data.message)}catch(e){console.error("API è¯·æ±‚å¤±è´¥:",e)}},downloadModel(){if(!this.modelUrl)return;const e=document.createElement("a");e.href=this.modelUrl,e.download=this.modelUrl.split("/").pop(),document.body.appendChild(e),e.click(),document.body.removeChild(e)},handlePresetSelect(e){this.modelUrl=e.target.value}}};const _=(0,i.A)(O,[["render",h]]);var P=_;const T=[{path:"/",name:"threeDViewer",component:P}],E=(0,u.aE)({history:(0,u.LA)(),routes:T});E.beforeEach(((e,t,o)=>{document.title="å¯»ä»™æ¨¡å‹æŸ¥çœ‹å™¨",o()}));var U=E;const S=(0,n.Ef)(d);S.use(U),S.mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,s){if(!n){var l=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],s=e[d][2];for(var a=!0,i=0;i<n.length;i++)(!1&s||l>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(a=!1,s<l&&(l=s));if(a){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,l=n[0],a=n[1],i=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(i)var d=i(o)}for(t&&t(n);c<l.length;c++)s=l[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},n=self["webpackChunkfeuilles"]=self["webpackChunkfeuilles"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(5565)}));n=o.O(n)})();
//# sourceMappingURL=app.c6ec6cbf.js.map