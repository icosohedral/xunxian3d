(function(){"use strict";var e={8943:function(e,t,o){var n=o(5130),r=o(6768);const s={id:"app",class:"text-center bg-background bg-stone-100"};function l(e,t,o,n,l,a){const i=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.bF)(i)])}var a={name:"App",data(){return{colorTheme:"stone",darkmod:!1}}},i=o(1241);const c=(0,i.A)(a,[["render",l]]);var u=c,d=o(1387),f=o(4232);const b={class:"canvas-container"},p={class:"canvas-wrapper"},v={class:"sidebar text-left"},g={class:"preset-area"},m=["value"];function h(e,t,o,n,s,l){const a=(0,r.g2)("TresPerspectiveCamera"),i=(0,r.g2)("OrbitControls"),c=(0,r.g2)("TresAmbientLight"),u=(0,r.g2)("TresDirectionalLight"),d=(0,r.g2)("primitive"),h=(0,r.g2)("TresCanvas");return(0,r.uX)(),(0,r.CE)(r.FK,null,[t[4]||(t[4]=(0,r.Lk)("div",{class:"flex px-6 py-4 bg-stone-200"},[(0,r.Lk)("h1",{class:"text-2xl font-bold text-amber-700 flex items-center"},[(0,r.Lk)("img",{src:"/static/slogo.ico",alt:"Logo",class:"w-20 h-10 mr-2"}),(0,r.eW)(" 寻仙模型查看器 ")])],-1)),(0,r.Lk)("div",b,[(0,r.Lk)("div",p,[(0,r.bF)(h,{class:"fixed-canvas","clear-color":"#FFFFFF"},{default:(0,r.k6)((()=>[(0,r.bF)(a,{position:[0,2,5]}),(0,r.bF)(i),(0,r.bF)(c,{intensity:1}),(0,r.bF)(u,{position:[5,5,5],intensity:.8}),s.objModel?((0,r.uX)(),(0,r.Wv)(d,{key:0,object:s.objModel},null,8,["object"])):(0,r.Q3)("",!0)])),_:1})]),(0,r.Lk)("div",v,[(0,r.Lk)("div",g,[t[2]||(t[2]=(0,r.Lk)("label",{for:"preset-models",class:"block mb-2 font-semibold text-gray-700"},"选择模型",-1)),(0,r.Lk)("select",{id:"preset-models",class:"w-full p-2 border rounded-lg",onChange:t[0]||(t[0]=(...e)=>l.handlePresetSelect&&l.handlePresetSelect(...e))},[t[1]||(t[1]=(0,r.Lk)("option",{value:""},"-- 选择模型 --",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.presetModels,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.url,value:e.url},(0,f.v_)(e.name),9,m)))),128))],32)]),t[3]||(t[3]=(0,r.Fv)('<div class="instructions mt-6"><h2 class="block font-semibold text-base text-gray-700 mb-4">操作说明</h2><ul class="text-gray-600"><li class="mb-2">🔄 <strong>按住左键</strong> 旋转模型</li><li class="mb-2">🤏 <strong>按住右键</strong> 拖动模型</li><li class="mb-2">🔍 <strong>使用滚轮</strong> 缩放模型</li></ul></div>',1))])])],64)}var y=o(144),k=o(6013),w=o(6702),j=o(427),x=o(8371),L=o(1353),F=o(4373);const O=F.A.create({baseURL:"/",timeout:1e4});var M={get_model_list(){return O.get("/api/get_model_list")}},C={name:"ThreeDViewer",components:{TresCanvas:k.rs,OrbitControls:w.NU},data(){return{presetModels:[],modelUrl:"",objModel:null}},mounted(){this.fetchModels()},watch:{modelUrl(e){if(!e)return;const t=e.split(".").pop().toLowerCase();if("obj"===t){const t=new j.L;t.load(e,(e=>{const t=new x._4j({color:8421504});e.traverse((e=>{e.isMesh&&(e.material=t)})),this.objModel=(0,y.IG)(e)}))}else if("glb"===t||"gltf"===t){const t=new L.B;t.load(e,(e=>{this.objModel=(0,y.IG)(e.scene)}))}}},methods:{async fetchModels(){try{const e=await M.get_model_list();e.data.result?this.presetModels=e.data.data.map((e=>({name:e.replace(/\.(glb|gltf|obj)$/i,""),url:`/static/models/${e}`}))):console.error("获取模型列表失败:",e.data.message)}catch(e){console.error("API 请求失败:",e)}},handlePresetSelect(e){this.modelUrl=e.target.value}}};const _=(0,i.A)(C,[["render",h]]);var T=_;const P=[{path:"/",name:"threeDViewer",component:T}],E=(0,d.aE)({history:(0,d.LA)(),routes:P});E.beforeEach(((e,t,o)=>{document.title="寻仙模型查看器",o()}));var S=E;const A=(0,n.Ef)(u);A.use(S),A.mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,s){if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],s=e[u][2];for(var a=!0,i=0;i<n.length;i++)(!1&s||l>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(a=!1,s<l&&(l=s));if(a){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,r,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,l=n[0],a=n[1],i=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(i)var u=i(o)}for(t&&t(n);c<l.length;c++)s=l[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},n=self["webpackChunkfeuilles"]=self["webpackChunkfeuilles"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(8943)}));n=o.O(n)})();
//# sourceMappingURL=app.21b5a455.js.map